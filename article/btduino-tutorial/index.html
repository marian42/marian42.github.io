
<!doctype html>
<html class="no-js" lang="en">
    <head>
        <title>
            How to add Bluetooth to your Arduino Project with BTduino | Marian's Blog
		</title>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Marian Kleineberg">
        <meta name="description" content="How to add Bluetooth to your Arduino Project with BTduino - Personal blog about game development, programming and making">
        <meta itemprop="name" content="How to add Bluetooth to your Arduino Project with BTduino">
        <meta itemprop="description" content="How to add Bluetooth to your Arduino Project with BTduino - Personal blog about game development, programming and making">
        <meta property="og:title" content="How to add Bluetooth to your Arduino Project with BTduino">
        <meta property="og:description" content="How to add Bluetooth to your Arduino Project with BTduino - Personal blog about game development, programming and making">
        <meta property="og:image" content="">
        <meta property="og:url" content="https://marian42.de/article/btduino-tutorial/">
        <meta property="og:site_name" content="Marian's Blog"><meta property="og:type" content="website">

        <link rel="icon" type="image/png" href="https://marian42.de/favicon-32x32.png" sizes="32x32">
        <link rel="icon" type="image/png" href="https://marian42.de/favicon-16x16.png" sizes="16x16">

        <link href="https://marian42.de/index.xml" rel="feed" type="application/rss+xml" title="Marian's Blog" />
                
        <link rel="stylesheet" href="/style.css">        
    </head>
    <body>
        <header class="triangle-pattern">
            <div class="container">
                <a href="/" class="logo">
                    <img src="/logo.svg" alt="Marian's Blog">
                </a>
            </div>
        </header>
        
        <article class="card">
    <a href="/article/btduino-tutorial/">
        <h1>How to add Bluetooth to your Arduino Project with BTduino</h1>
    </a>
    <div class="timestamp">July 24, 2013</div>
    <div class="content">
        <p>This tutorial will show you how to connect your Arduino project to an Android device using the <a href="http://marian42.de/?p=179">BTduino app</a>. You don’t need an extra Arduino library and you don’t need to code anything on the Android side.</p>
<p>Here is what you need:</p>
<ul>
<li>an Android device running Android 4.0 or higher that supports bluetooth (most phones do)</li>
<li>an Arduino or any microcontroller that has a Serial connection</li>
<li>a bluetooth module for the Arduino (get one for about €10, for example from <a href="http://www.ebay.com/sch/i.html?_sop=15&amp;_sacat=0&amp;_from=R40&amp;_nkw=arduino+bluetooth+board&amp;LH_BIN=1">ebay</a>)</li>
<li>the parts for your project</li>
</ul>
<p>Connect the bluetooth module to your Arduino like this:</p>
<p><figure>
    <a href="btsetup3.png">
        <img src="btsetup3_1280.png" alt="">
    </a>
</figure></p>
<p>If your bluetooth module runs at 3.3V, you need an additional voltage divider. In this case, use three resistors with an equal value between 1kΩ and 10kΩ as shown above.</p>
<p>Then, set up your Arduino project. For this tutorial I will be using a potentiometer and an LED. Here is the setup:</p>
<p><figure>
    <a href="schaltung_Steckplatine.png">
        <img src="schaltung_Steckplatine_1280.png" alt="">
    </a>
</figure></p>
<p>Now install the BTduino app on your device:</p>
<p><a href="/article/btduino-tutorial/BTduino.apk">Download it here</a> or scan the QR code on the right.</p>
<p>The main concept of the BTduino app is to send data through the serial interface in text form. Every set of data contains the name of the event, a colon and the value:</p>
<pre><code>name:value</code></pre>
<p>To send the value of the potentiometer to the BTduino app, you just have to make the Arduino send something like “A0:4”. Here is the code:</p>
<pre><code>Serial.begin(9600);

void loop() {
    Serial.println(&quot;A0:&quot; + String(analogRead(0)));
    delay(200);
}</code></pre>
<p>Now it’s time to start the app and establish a bluetooth connection. To do so, click on the connect button on the bottom right of the screen. Enable bluetooth if prompted. Your bluetooth module should show up in the list. If you are asked for a pin, try 0000 or 1234.</p>
<p>You can show the raw text data that is sent by the Arduino using the bluetooth console. However, the point of this app is to interpret the received data. Click “Exchange values” and a screen will show up that displays the events of your bluetooth project. The event that was named “A0” by the above Arduino code will show up automatically. You can display a gauge or a plot of the data by clicking the icons next to the value display. Play around with the potentiometer to see how the value changes.</p>
<p><figure>
    <a href="Screenshot_2013-07-25-00-29-39.png">
        <img src="Screenshot_2013-07-25-00-29-39.png" alt="">
    </a>
</figure></p>
<p>To add an event for the LED, click the plus icon in the BTduino app. Enter “led” for the name and select the “Send boolean” event. Every time you click the button on the new event, the app will send either “led:false” or “led:true” to the Arduino</p>
<p>Receiving data at the Arduino is a bit more complicated than sending because you will have to read and interpret the serial data. So a good point to start is <a href="/article/btduino-tutorial/BTduino_example.txt">this example sketch</a> that provides a base for BTduino projects.</p>
<p>Open a new Arduino sketch and paste the content of the <a href="/article/btduino-tutorial/BTduino_example.txt">example sketch</a>. To use the LED, declare a variable for the pin and set the pin mode in the setup function:</p>
<pre><code>int ledpin = 13;
...
pinMode(ledpin,OUTPUT);</code></pre>
<p>Every time a full line of text is received, the function <em>receiveline</em> will be called. After the comment <em>Check events</em> you have acces to the string variables <em>name</em> and <em>value</em>. To switch the LED, add this code:</p>
<pre><code>if (name == &quot;led&quot;) {
    if (value == &quot;true&quot;) digitalWrite(ledpin,HIGH);
    if (value == &quot;false&quot;) digitalWrite(ledpin,LOW);
}</code></pre>
<p>This is one of the examples provided by the sketch so you just need to remove the comment. Upload the sketch and you should be able to turn the LED on and of from your Android device!</p>
<p>That’s it for the tutorial. You can take a closer look at the example sketch to see what else this app is capable of. Also, every event that you can add to your project in BTduino provides an example if you long-click it and select “About”. For more information, take a look at the <a href="http://marian42.de/?p=140">events documentation</a>. There is a <a href="http://marian42.de/?p=242">troubleshooting page</a> for frequent problems. Please <a href="mailto:mail@marian42.de">send me an email</a> if you have any problems, if you want to report a bug or request a feature or if you built a project with BTduino.</p>
<p>Also, you might want to take a look at this <a href="http://ecno92.blogspot.de/2012/11/jy-mcu-linvor-at-commands-change-name.html" target="_blank">guide</a> to change some of the bluetooth module’s settings. I changed the baud rate of my module to 57600. At the standard rate of 9600 it takes about 1ms to send one character which can slow down a time-critical project.</p>

    </div>
</article>

        <footer>
            <div class="socials">
                <div class="inner-div">
                    <a href="mailto:mail@marian42.de">
                        Contact
                    </a>
                </div>
                <div>
                    <a href="https://mastodon.gamedev.place/@marian42" rel="me" title="Follow me on Mastodon" class="social-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="-32 0 512 512">                                
                            <path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/>
                        </svg>
                    </a>
                    <a href="https://twitter.com/marian42_" title="Follow me on Twitter" class="social-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 248 204">
                            <path d="M221.95,51.29c0.15,2.17,0.15,4.34,0.15,6.53c0,66.73-50.8,143.69-143.69,143.69v-0.04 C50.97,201.51,24.1,193.65,1,178.83c3.99,0.48,8,0.72,12.02,0.73c22.74,0.02,44.83-7.61,62.72-21.66 c-21.61-0.41-40.56-14.5-47.18-35.07c7.57,1.46,15.37,1.16,22.8-0.87C27.8,117.2,10.85,96.5,10.85,72.46c0-0.22,0-0.43,0-0.64 c7.02,3.91,14.88,6.08,22.92,6.32C11.58,63.31,4.74,33.79,18.14,10.71c25.64,31.55,63.47,50.73,104.08,52.76 c-4.07-17.54,1.49-35.92,14.61-48.25c20.34-19.12,52.33-18.14,71.45,2.19c11.31-2.23,22.15-6.38,32.07-12.26 c-3.77,11.69-11.66,21.62-22.2,27.93c10.01-1.18,19.79-3.86,29-7.95C240.37,35.29,231.83,44.14,221.95,51.29z"/>
                        </svg>
                    </a>
                    <a href="https://github.com/marian42" title="View my code on Github" class="social-icon">
                        <svg viewbox="0 0 98 96" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"/>
                        </svg>
                    </a>
                    <a href="/index.xml" title="RSS feed" class="social-icon">
                        <svg viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg">
                            <path d="M 0.38705632,0.38705632 V 1.5913525 A 6.021594,6.021594 0 0 1 6.4086474,7.6129437 H 7.6129437 A 7.2259129,7.2259129 0 0 0 0.38705632,0.38705632 Z m 0,2.40864748 V 4 A 3.6129564,3.6129564 0 0 1 4,7.6129437 H 5.2042963 A 4.8172751,4.8172751 0 0 0 0.38705632,2.7957038 Z M 1.3430849,5.7008865 A 0.95602666,0.95602666 0 0 0 0.38705632,6.6569151 0.95602666,0.95602666 0 0 0 1.3430849,7.6129437 0.95602666,0.95602666 0 0 0 2.2991135,6.6569151 0.95602666,0.95602666 0 0 0 1.3430849,5.7008865 Z" />
                        </svg>
                    </a>
                </div>
            </div>
            <div class="decorator triangle-pattern">
            </div>
        </footer>
    </body>
</html>